(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(245)}])},245:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>C});var t=r(4848),a=r(6540),n=r(4164),l=r(856);function i(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,l.QP)((0,n.$)(s))}let o=a.forwardRef((e,s)=>{let{className:r,type:a,...n}=e;return(0,t.jsx)("input",{type:a,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...n})});o.displayName="Input";var d=r(7859),c=r(6990);let u=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=a.forwardRef((e,s)=>{let{className:r,variant:a,size:n,asChild:l=!1,...o}=e,c=l?d.DX:"button";return(0,t.jsx)(c,{className:i(u({variant:a,size:n,className:r})),ref:s,...o})});m.displayName="Button";var p=r(8871),f=r(9785),b=r(4476),x=r(3376);let h=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(x.b,{ref:s,className:i(h(),r),...a})});v.displayName=x.b.displayName;let g=f.Op,j=a.createContext({}),N=e=>{let{...s}=e;return(0,t.jsx)(j.Provider,{value:{name:s.name},children:(0,t.jsx)(f.xI,{...s})})},w=()=>{let e=a.useContext(j),s=a.useContext(y),{getFieldState:r,formState:t}=(0,f.xW)(),n=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=s;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},y=a.createContext({}),R=a.forwardRef((e,s)=>{let{className:r,...n}=e,l=a.useId();return(0,t.jsx)(y.Provider,{value:{id:l},children:(0,t.jsx)("div",{ref:s,className:i("space-y-2",r),...n})})});R.displayName="FormItem";let _=a.forwardRef((e,s)=>{let{className:r,...a}=e,{error:n,formItemId:l}=w();return(0,t.jsx)(v,{ref:s,className:i(n&&"text-destructive",r),htmlFor:l,...a})});_.displayName="FormLabel";let F=a.forwardRef((e,s)=>{let{...r}=e,{error:a,formItemId:n,formDescriptionId:l,formMessageId:i}=w();return(0,t.jsx)(d.DX,{ref:s,id:n,"aria-describedby":a?"".concat(l," ").concat(i):"".concat(l),"aria-invalid":!!a,...r})});F.displayName="FormControl",a.forwardRef((e,s)=>{let{className:r,...a}=e,{formDescriptionId:n}=w();return(0,t.jsx)("p",{ref:s,id:n,className:i("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription",a.forwardRef((e,s)=>{let{className:r,children:a,...n}=e,{error:l,formMessageId:o}=w(),d=l?String(null==l?void 0:l.message):a;return d?(0,t.jsx)("p",{ref:s,id:o,className:i("text-sm font-medium text-destructive",r),...n,children:d}):null}).displayName="FormMessage";let k=b.z.object({URL:b.z.string().min(1,{message:"入力してください"}),pitch:b.z.string().min(1,{message:"入力してください"})});function C(){let[e,s]=(0,a.useState)(!1),r=(0,f.mN)({resolver:(0,p.u)(k),defaultValues:{URL:"",pitch:""}}),n=async e=>{s(!0);try{let s=await fetch("/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();alert("エラー: ".concat(e.error));return}let r=s.headers.get("Content-Disposition"),t="processed_audio.mp3";if(r){let e=r.match(/filename\*=UTF-8''(.+)/);e&&(t=decodeURIComponent(e[1]))}let a=await s.blob(),n=document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,n.click()}catch(e){alert("エラーが発生しました: ".concat(e))}finally{s(!1)}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"",children:[!e&&(0,t.jsxs)("div",{className:"row grid grid-cols-6 grid-rows-10 gap-4",children:[(0,t.jsx)("div",{className:"col-span-1 row-span-4"}),(0,t.jsx)("div",{className:"col-span-4 row-span-4 content-end",children:(0,t.jsx)("h3",{className:"text-center pt- place-content-end m-auto font-bold text-[2rem]",children:"Youtube動画のピッチを変更する"})}),(0,t.jsx)("div",{className:"col-span-1 row-span-4"}),(0,t.jsx)("div",{className:"col-span-2 row-span-6"}),(0,t.jsx)(g,{...r,children:(0,t.jsxs)("form",{onSubmit:r.handleSubmit(n),className:" col-span-2 row-span-6 m-auto w-full",children:[(0,t.jsx)(N,{control:r.control,name:"URL",render:s=>{let{field:r}=s;return(0,t.jsxs)(R,{children:[(0,t.jsx)(_,{children:"YouTube URL:"}),(0,t.jsx)(F,{children:(0,t.jsx)(o,{placeholder:"URL",...r,disabled:e})})]})}}),(0,t.jsx)(N,{control:r.control,name:"pitch",render:s=>{let{field:r}=s;return(0,t.jsxs)(R,{children:[(0,t.jsx)(_,{children:"ピッチ (半音単位):"}),(0,t.jsx)(F,{children:(0,t.jsx)(o,{type:"number",placeholder:"",...r,disabled:e})})]})}}),(0,t.jsx)("div",{className:" text-center mt-2",children:(0,t.jsx)(m,{type:"submit",className:"w-6/12",disabled:e,children:e?"処理中...":"確定"})})]})}),(0,t.jsx)("p",{id:"response"})]}),e&&(0,t.jsxs)("div",{className:"loading-overlay",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsxs)("div",{className:" grid grid-cols-6 grid-rows-4 gap-3",children:[(0,t.jsx)("div",{className:" col-span-6 row-span-3"}),(0,t.jsx)("div",{className:" col-span-2"}),(0,t.jsxs)("p",{className:"text-center col-span-2 text-[1.5rem] font-bold",children:["音声処理中です...",(0,t.jsx)("br",{}),"この処理には数分かかる場合があります"]})]}),(0,t.jsx)("div",{className:" w-full",children:(0,t.jsx)("div",{className:"spinner-box m-auto",children:(0,t.jsxs)("div",{className:"pulse-container",children:[(0,t.jsx)("div",{className:"pulse-bubble pulse-bubble-1"}),(0,t.jsx)("div",{className:"pulse-bubble pulse-bubble-2"}),(0,t.jsx)("div",{className:"pulse-bubble pulse-bubble-3"}),(0,t.jsx)("div",{className:"pulse-bubble pulse-bubble-4"}),(0,t.jsx)("div",{className:"pulse-bubble pulse-bubble-5"})]})})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[520,636,593,792],()=>s(2022)),_N_E=e.O()}]);